stages:
  - test

cli-test:
  image: node:latest
  stage: test
  script:
    - cd sdk
    - yarn
    - yarn build
    - yarn link
    - cd ../cli
    - yarn link @qore/sdk
    - yarn
    - yarn test
  only:
    refs:
      - merge_requests
    changes:
      - cli/**/*

client-test:
  image: node:latest
  stage: test
  script:
    - cd client
    - yarn
    - yarn test
  only:
    refs:
      - merge_requests
    changes:
      - client/**/*
